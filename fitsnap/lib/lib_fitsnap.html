

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.1. FitSnap &mdash; FitSNAP  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/lammps.css?v=14d82903" />

  
    <link rel="shortcut icon" href="../_static/fs_favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3.2. Scraper" href="lib_scraper.html" />
    <link rel="prev" title="3. Library" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/FitSNAP.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../run/index.html">3. Run FitSNAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linear.html">4. Linear Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pytorch.html">5. PyTorch Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reaxff.html">6. ReaxFF Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">7. Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programmer Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">1. Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../executable.html">2. Executable</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">3. Library</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.1. FitSnap</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parallel-tools">3.1.1. Parallel Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fitsnap3lib.parallel_tools.DistributedList"><code class="docutils literal notranslate"><span class="pre">DistributedList</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fitsnap3lib.parallel_tools.GracefulError"><code class="docutils literal notranslate"><span class="pre">GracefulError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fitsnap3lib.parallel_tools.ParallelTools"><code class="docutils literal notranslate"><span class="pre">ParallelTools</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fitsnap3lib.parallel_tools.SharedArray"><code class="docutils literal notranslate"><span class="pre">SharedArray</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#fitsnap3lib.parallel_tools.StubsArray"><code class="docutils literal notranslate"><span class="pre">StubsArray</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#config">3.1.2. Config</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fitsnap3lib.io.input.Config"><code class="docutils literal notranslate"><span class="pre">Config</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lib_scraper.html">3.2. Scraper</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_calculator.html">3.3. Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_solver.html">3.4. Solver</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_lib.html">3.5. lib/</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_tools.html">3.6. tools/</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tests.html">4. Tests</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">FitSNAP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">3. </span>Library</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3.1. </span>FitSnap</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/lib/lib_fitsnap.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="fitsnap">
<h1><span class="section-number">3.1. </span>FitSnap<a class="headerlink" href="#fitsnap" title="Link to this heading"></a></h1>
<p>The <code class="code docutils literal notranslate"><span class="pre">FitSnap</span></code> class houses all objects needed for performing a fit. These objects
are instantiated from other core classes described in the rest of the docs. The two main
inputs to a <code class="code docutils literal notranslate"><span class="pre">FitSnap</span></code> instance are (1) settings and (2) an MPI communicator. The
settings can be a nested dictionary as shown in some examples, while the MPI communicator
is typically the world communicator containing all resources dictated by the <code class="code docutils literal notranslate"><span class="pre">mpirun</span></code>
command. After instantiating <code class="code docutils literal notranslate"><span class="pre">FitSnap</span></code> with these inputs, the instance will contain
its own instance of <code class="code docutils literal notranslate"><span class="pre">ParallelTools</span></code> which houses functions and data structures that
operate on the resources in the input communicator. The settings will be stored in an instance
of the <code class="code docutils literal notranslate"><span class="pre">Config</span></code> class. The <code class="code docutils literal notranslate"><span class="pre">FitSnap</span></code> class is documented below.</p>
<p><code class="code docutils literal notranslate"><span class="pre">FitSnap</span></code> contains instances of two classes that help with MPI communication and
settings; <code class="code docutils literal notranslate"><span class="pre">ParallelTools</span></code> and <code class="code docutils literal notranslate"><span class="pre">Config</span></code>, respectively. These two classes are
explained below. In addition to these classes, there are other core classes
<code class="code docutils literal notranslate"><span class="pre">Scraper</span></code>, <code class="code docutils literal notranslate"><span class="pre">Calculator</span></code>, and <code class="code docutils literal notranslate"><span class="pre">Solver</span></code> which are explained in later
sections.</p>
<section id="parallel-tools">
<h2><span class="section-number">3.1.1. </span>Parallel Tools<a class="headerlink" href="#parallel-tools" title="Link to this heading"></a></h2>
<p>Parallel Tools are a collection of data structures and functions for transferring data in
FitSNAP workflow in a massively parallel fashion.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">ParallelTools</span></code> instance <code class="code docutils literal notranslate"><span class="pre">pt</span></code> of a FitSNAP instance <code class="code docutils literal notranslate"><span class="pre">fs</span></code> can be used
to create shared memory arrays, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a shared array called `a`.</span>
<span class="n">fs</span><span class="o">.</span><span class="n">pt</span><span class="o">.</span><span class="n">create_shared_array</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">nrows</span><span class="p">,</span> <span class="n">ncols</span><span class="p">)</span>
<span class="c1"># Change the shared array at a rank-dependent element.</span>
<span class="n">fs</span><span class="o">.</span><span class="n">pt</span><span class="o">.</span><span class="n">shared_arrays</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">array</span><span class="p">[</span><span class="n">rank</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">rank</span>
<span class="c1"># Observe that the change happened on all procs.</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Shared array on rank </span><span class="si">{</span><span class="n">rank</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">fs</span><span class="o">.</span><span class="n">pt</span><span class="o">.</span><span class="n">shared_arrays</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">array</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Currently these tools reside in a single file <code class="code docutils literal notranslate"><span class="pre">parallel_tools.py</span></code> which houses some
classes described below.</p>
<dl class="py class" id="module-fitsnap3lib.parallel_tools">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.DistributedList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fitsnap3lib.parallel_tools.</span></span><span class="sig-name descname"><span class="pre">DistributedList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proc_length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.DistributedList" title="Link to this definition"></a></dt>
<dd><p>This class is used for distributed memory Python lists. The class to wraps Python’s <cite>list</cite> to ensure size stays the
same allowing collection at end. This class is normally used like, for example:
<code class="docutils literal notranslate"><span class="pre">pt.add_2_fitsnap(&quot;Groups&quot;,</span> <span class="pre">DistributedList(nconfigs))</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>proc_length</strong> (<em>int</em>) – Number of elements for the list on current process.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.DistributedList._len">
<span class="sig-name descname"><span class="pre">_len</span></span><a class="headerlink" href="#fitsnap3lib.parallel_tools.DistributedList._len" title="Link to this definition"></a></dt>
<dd><p>length of distributed list held by current proc</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.DistributedList._list">
<span class="sig-name descname"><span class="pre">_list</span></span><a class="headerlink" href="#fitsnap3lib.parallel_tools.DistributedList._list" title="Link to this definition"></a></dt>
<dd><p>local section of distributed list</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.DistributedList.get_list">
<span class="sig-name descname"><span class="pre">get_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.DistributedList.get_list" title="Link to this definition"></a></dt>
<dd><p>Returns deepcopy of internal list</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.GracefulError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fitsnap3lib.parallel_tools.</span></span><span class="sig-name descname"><span class="pre">GracefulError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.GracefulError" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fitsnap3lib.parallel_tools.</span></span><span class="sig-name descname"><span class="pre">ParallelTools</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools" title="Link to this definition"></a></dt>
<dd><p>This class creates and contains arrays used for fitting, across multiple processors.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.check_fitsnap_exist">
<span class="sig-name descname"><span class="pre">check_fitsnap_exist</span></span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.check_fitsnap_exist" title="Link to this definition"></a></dt>
<dd><p>Checks whether fitsnap dictionaries exist before creating a new
one, set to <cite>False</cite> to allow recreating a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.add_2_fitsnap">
<span class="sig-name descname"><span class="pre">add_2_fitsnap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">an_object</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.add_2_fitsnap" title="Link to this definition"></a></dt>
<dd><p>Add an object, such as a <cite>DistributedList</cite>, to the <cite>pt.fitsnap_dict</cite> dictionary. This dictionary contains
configuration information such as group name, filename, testing bools, etc. This function is normally used in
conjunction with the <cite>DistributedList</cite> class, where a distributed memory list is added with a keyname <cite>name</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Key name of the object being added.</p></li>
<li><p><strong>an_object</strong> – A Python object to add, usually an instance of our <cite>DistributedList</cite> class.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.create_shared_array">
<span class="sig-name descname"><span class="pre">create_shared_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'d'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.create_shared_array" title="Link to this definition"></a></dt>
<dd><p>Create a shared memory array as a key in the <code class="docutils literal notranslate"><span class="pre">pt.shared_array</span></code> dictionary. This function uses the <code class="docutils literal notranslate"><span class="pre">SharedArray</span></code>
class to instantiate a shared memory array in the supplied dictionary key <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p>
<p>If the key name already exists, this function will free the memory associated with the existing array.</p>
<p>If not using MPI, i.e. <code class="docutils literal notranslate"><span class="pre">stubs</span> <span class="pre">==</span> <span class="pre">0</span></code>, we create a <code class="docutils literal notranslate"><span class="pre">StubsArray</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the array which will be the key name.</p></li>
<li><p><strong>size1</strong> (<em>int</em>) – First dimension size.</p></li>
<li><p><strong>size2</strong> (<em>int</em>) – Optional second dimension size, defaults to 1.</p></li>
<li><p><strong>dtype</strong> (<em>str</em>) – Optional data type character, defaults to <cite>d</cite> for double.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.exception">
<span class="sig-name descname"><span class="pre">exception</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">err</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.exception" title="Link to this definition"></a></dt>
<dd><p>Gracefully exit with an exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>err</strong> (<em>str</em>) – Error message to exit with.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.free">
<span class="sig-name descname"><span class="pre">free</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.free" title="Link to this definition"></a></dt>
<dd><p>Free memory associated with all shared arrays.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.gather_fitsnap">
<span class="sig-name descname"><span class="pre">gather_fitsnap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allgather</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.gather_fitsnap" title="Link to this definition"></a></dt>
<dd><p>Gather distributed lists.
:param allgather: If true then we allgather. When number of procs is large this will use more memory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.get_ncpn">
<span class="sig-name descname"><span class="pre">get_ncpn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nconfigs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.get_ncpn" title="Link to this definition"></a></dt>
<dd><p>Get number of configs per node; return nconfigs if stubs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>nconfigs</strong> – integer number of configurations on this process, typically length of list of
data dictionaries.</p>
</dd>
</dl>
<p>Returns number of configs per node, reduced across procs, or just nconfigs if stubs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.new_slice_a">
<span class="sig-name descname"><span class="pre">new_slice_a</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.new_slice_a" title="Link to this definition"></a></dt>
<dd><p>Create array to show which sub a matrix indices belong to which proc.
For linear solvers, the A matrix may be composed of either summed per-atom descriptors OR
per-atom descriptors.
For nonlinear solvers, the A matrix is composed of per-atom quantities like bispectrum
components, etc.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.new_slice_b">
<span class="sig-name descname"><span class="pre">new_slice_b</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.new_slice_b" title="Link to this definition"></a></dt>
<dd><p>Create array to show which sub b matrix indices belong to which proc.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.new_slice_c">
<span class="sig-name descname"><span class="pre">new_slice_c</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.new_slice_c" title="Link to this definition"></a></dt>
<dd><p>Create array to show which sub c matrix indices belong to which proc.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.new_slice_dgrad">
<span class="sig-name descname"><span class="pre">new_slice_dgrad</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.new_slice_dgrad" title="Link to this definition"></a></dt>
<dd><p>Create array to show which sub dgrad matrix indices belong to which proc.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.new_slice_neighlist">
<span class="sig-name descname"><span class="pre">new_slice_neighlist</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.new_slice_neighlist" title="Link to this definition"></a></dt>
<dd><p>Create array to show which sub neighlist matrix indices belong to which proc.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.new_slice_t">
<span class="sig-name descname"><span class="pre">new_slice_t</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.new_slice_t" title="Link to this definition"></a></dt>
<dd><p>Create array to show which sub types matrix indices belong to which proc.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.ParallelTools.slice_array">
<span class="sig-name descname"><span class="pre">slice_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.ParallelTools.slice_array" title="Link to this definition"></a></dt>
<dd><p>Slices an array using Python’s native <cite>slice</cite> function. Creates an attribute <cite>pt.shared_arrays[name].sliced_array</cite>
containing the sliced array.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.SharedArray">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fitsnap3lib.parallel_tools.</span></span><span class="sig-name descname"><span class="pre">SharedArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size3</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'d'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multinode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MPI</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.SharedArray" title="Link to this definition"></a></dt>
<dd><p>Instantiating this class will create a shared memory array in the <code class="docutils literal notranslate"><span class="pre">array</span></code> attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size1</strong> (<em>int</em>) – First dimension of the array.</p></li>
<li><p><strong>size2</strong> (<em>int</em>) – Optional second dimension of the array, defaults to 1.</p></li>
<li><p><strong>size3</strong> (<em>int</em>) – Optional third dimension of the array, defaults to 1.</p></li>
<li><p><strong>dtype</strong> (<em>str</em>) – Optional data type, defaults to <cite>d</cite> for double.</p></li>
<li><p><strong>multinode</strong> (<em>int</em>) – Optional multinode flag used for scalapack purposes.</p></li>
<li><p><strong>comms</strong> (<em>MPI.Comm</em>) – MPI communicator.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.SharedArray.array">
<span class="sig-name descname"><span class="pre">array</span></span><a class="headerlink" href="#fitsnap3lib.parallel_tools.SharedArray.array" title="Link to this definition"></a></dt>
<dd><p>Array of numbers that share memory across processes in the communicator.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.StubsArray">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fitsnap3lib.parallel_tools.</span></span><span class="sig-name descname"><span class="pre">StubsArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size3</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'d'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.parallel_tools.StubsArray" title="Link to this definition"></a></dt>
<dd><p>Instantiating this class will create a stubs array in the <code class="docutils literal notranslate"><span class="pre">array</span></code> attribute. In plain speak,
this is just a normal numpy array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size1</strong> (<em>int</em>) – First dimension of the array.</p></li>
<li><p><strong>size2</strong> (<em>int</em>) – Optional second dimension of the array, defaults to 1.</p></li>
<li><p><strong>size3</strong> (<em>int</em>) – Optional third dimension of the array, defaults to 1.</p></li>
<li><p><strong>dtype</strong> (<em>str</em>) – Optional data type, defaults to <cite>d</cite> for double.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="fitsnap3lib.parallel_tools.StubsArray.array">
<span class="sig-name descname"><span class="pre">array</span></span><a class="headerlink" href="#fitsnap3lib.parallel_tools.StubsArray.array" title="Link to this definition"></a></dt>
<dd><p>Array of numbers that share memory across processes in the communicator.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="config">
<h2><span class="section-number">3.1.2. </span>Config<a class="headerlink" href="#config" title="Link to this heading"></a></h2>
<p>The Config class is used for storing settings associated with a FitSNAP instance. Throughout
the code and library examples, you may see code snippets like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fs</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sections</span><span class="p">[</span><span class="s2">&quot;GROUPS&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">group_table</span>
</pre></div>
</div>
<p>where <code class="code docutils literal notranslate"><span class="pre">fs</span></code> is the FitSNAP instance being accessed. In this snippet, the <code class="code docutils literal notranslate"><span class="pre">sections</span></code>
attribute contains keys, such as <code class="code docutils literal notranslate"><span class="pre">&quot;GROUPS&quot;</span></code>, which contains attributes like the group
table which we can access. In this regard, <code class="code docutils literal notranslate"><span class="pre">fs.config</span></code> stores all the settings relevant
to a particular FitSNAP instance or fit, which can then be easily accessed anywhere else
throughout the code.</p>
<dl class="py class" id="module-fitsnap3lib.io.input">
<dt class="sig sig-object py" id="fitsnap3lib.io.input.Config">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fitsnap3lib.io.input.</span></span><span class="sig-name descname"><span class="pre">Config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arguments_lst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.io.input.Config" title="Link to this definition"></a></dt>
<dd><p>Class for storing input settings in a <cite>config</cite> instance. The <cite>config</cite> instance is first created
in <cite>io/output.py</cite>. If given a path to an input script, we use Python’s native ConfigParser
to parse the settings. If given a nested dictionary, the sections are determined from the
first keys and specific settings from the nested keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pt</strong> – A ParallelTools instance.</p></li>
<li><p><strong>input</strong> – Optional input can either be a filename or a dictionary.</p></li>
<li><p><strong>arguments_lst</strong> – List of args that can be supplied at the command line.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="fitsnap3lib.io.input.Config.infile">
<span class="sig-name descname"><span class="pre">infile</span></span><a class="headerlink" href="#fitsnap3lib.io.input.Config.infile" title="Link to this definition"></a></dt>
<dd><p>String for optional input filename. Defaults to None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="fitsnap3lib.io.input.Config.indict">
<span class="sig-name descname"><span class="pre">indict</span></span><a class="headerlink" href="#fitsnap3lib.io.input.Config.indict" title="Link to this definition"></a></dt>
<dd><p>Dictionary for optional input dictionary of settings, to replace input file. Defaults
to None.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.io.input.Config.convert_to_dict">
<span class="sig-name descname"><span class="pre">convert_to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">original_input</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.io.input.Config.convert_to_dict" title="Link to this definition"></a></dt>
<dd><p>Convert the current config (settings) object to a dictionary. Note that datatypes may not be preserved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>original_input</strong> – optional, set to True to return the original input</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Python dictionary containing the same elements as the original or current config (settings) object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>config_dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.io.input.Config.parse_cmdline">
<span class="sig-name descname"><span class="pre">parse_cmdline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arguments_lst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.io.input.Config.parse_cmdline" title="Link to this definition"></a></dt>
<dd><p>Parse command line args if using executable mode, or a list if using library mode.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fitsnap3lib.io.input.Config.view_state">
<span class="sig-name descname"><span class="pre">view_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_input</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitsnap3lib.io.input.Config.view_state" title="Link to this definition"></a></dt>
<dd><p>Print a view to screen of the sections contained in the FitSNAP configuration object in its current state.
When no ‘sections’ argument is provided, all sections’ information will be printed to screen.
If the argument contains invalid section name, it will be printed with a warning, but will not crash.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sections</strong> – optional list of sections or string of a single section name (i.e. [‘BISPECTRUM’, ‘CALCULATOR’, ‘REFERENCE’], or ‘GROUPS’)</p></li>
<li><p><strong>original_input</strong> – optional, set this value to “True” to view the original input file (saved in self._original_config) instead of the current state. This can be useful for debugging or cloning FitSNAP input settings objects.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="3. Library" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="lib_scraper.html" class="btn btn-neutral float-right" title="3.2. Scraper" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2025, Sandia Corporation.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
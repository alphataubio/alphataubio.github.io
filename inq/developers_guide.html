<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6. Developers Guide &mdash; INQ 0.95 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/lammps.css" type="text/css" />
    <link rel="shortcut icon" href="_static/inq_favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=1c4172e4"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="inq::magnitude" href="reference_magnitude.html" />
    <link rel="prev" title="5. Tutorial (C++)" href="tutorial_cpp.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/inq_logo.png" class="logo" alt="Logo"/>
          </a>
            <div class="lammps_version">Version: <b></b></div>
            <div class="lammps_release">git info: 0.95</div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. README</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#components">1.1. Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#basic-installation">1.2. Basic installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#reference">1.3. Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#introductory-material">1.4. Introductory material</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#release-information">1.5. Release information</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#acknowledgment">1.6. Acknowledgment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="compilation.html">2. Compilation and installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#compiling-and-running-on-a-local-computer">2.1. Compiling and running on a local computer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#install-dependencies-and-setup-environment">2.1.1. Install dependencies and setup environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#clone-repository">2.1.2. Clone repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#for-cpu-only-system">2.1.3. For CPU-only system</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#for-an-nvidia-gpu-system-with-nvcc-11-x">2.1.4. For an Nvidia-GPU system (with NVCC 11.x)</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#specific-computers">2.1.5. Specific computers</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#manually-setting-utilization-of-multiple-gpu-with-mpi">2.1.6. Manually setting utilization of multiple GPU with MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#installing-gcc-for-cuda">2.1.7. Installing GCC for CUDA</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#mac-os-14">2.1.8. Mac OS 14</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#recover-from-nvidia-device-error">2.1.9. Recover from Nvidia device error</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#compiling-inq-on-supercomputing-clusters">2.2. Compiling INQ on Supercomputing Clusters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#compiling-on-perlmutter-at-nersc">2.2.1. Compiling on Perlmutter at NERSC</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#compiling-on-lbnl-generic-linux-supercluster">2.2.2. Compiling on LBNL Generic Linux Supercluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#compiling-on-frontera-at-tacc-fhj-9-26-22">2.2.3. Compiling on Frontera at TACC (FHJ, 9/26/22)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#running-test-jobs">Running test jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#compiling-and-running-on-frontier">Compiling and running on Frontier</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#alcf-polaris">2.2.4. ALCF Polaris</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#llnl-sierra-lassen">2.2.5. LLNL Sierra/Lassen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#environment">Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#build-install-and-test">Build, Install and Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#open-a-shell-in-a-node">Open a shell in a node</a></li>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#running-interactively">Running interactively</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#llnl-tioga-amd">2.2.6. LLNL Tioga (AMD)</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#olcf-frontier-amd">2.2.7. OLCF Frontier (AMD)</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#nersc-perlmutter-nvidia">2.2.8. NERSC Perlmutter (NVIDIA)</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#quartz">2.2.9. Quartz</a><ul>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#environment">Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#build-install-and-test">Build, Install and Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#open-a-shell-in-a-node">Open a shell in a node</a></li>
<li class="toctree-l4"><a class="reference internal" href="compilation.html#running-interactively">Running interactively</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#compiling-parallel-mpi-hdf5-for-inq">2.3. Compiling Parallel (MPI) HDF5 for INQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#cmake">2.4. CMake</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#boost">2.5. BOOST</a><ul>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#install-boost-libraries">2.5.1. Install BOOST libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="compilation.html#install-boost">2.5.2. Install BOOST</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">3. Theory</a><ul>
<li class="toctree-l2"><a class="reference internal" href="theory.html#total-energy">3.1. Total energy</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#pseudopotential-application">3.2. Pseudopotential application</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#k-points">3.3. k-points</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#hartree-fock-with-k-points">3.4. Hartree-Fock with k-points</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#electric-fields-and-gauges">3.5. Electric fields and gauges</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#coordinates">3.6. Coordinates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="theory.html#mini-cell-circumscribing-a-sphere">3.6.1. Mini cell circumscribing a sphere</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#preconditioner">3.7. Preconditioner</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#exact-factorization">3.8. Exact factorization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="theory.html#nuclear-eom">3.8.1. Nuclear EOM</a></li>
<li class="toctree-l3"><a class="reference internal" href="theory.html#electronic-equation-of-motion">3.8.2. Electronic equation of motion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#self-consistency-acceleration">3.9. Self-consistency acceleration</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#magnetization">3.10. Magnetization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_shell_python.html">4. Tutorial (Shell and Python)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial_shell_python.html#nitrogen-molecule">4.1. Nitrogen molecule</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#setting-up-the-run-directory">4.1.1. Setting up the run directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#defining-the-simulation-parameters">4.1.2. Defining the simulation parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#running-the-simulation">4.1.3. Running the simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#querying-the-ground-state-results">4.1.4. Querying the ground-state results</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#changing-the-ion-positions">4.1.5. Changing the ion positions</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#scripting-the-potential-energy-surface-of-n2">4.1.6. Scripting: the potential energy surface of N2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_shell_python.html#benzene-optical-absorption-spectrum">4.2. Benzene optical absorption spectrum</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#simulation-parameters">4.2.1. Simulation parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#ground-state-calculation">4.2.2. Ground state calculation</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#first-time-propagation-finding-the-optimal-time-step">4.2.3. First time propagation, finding the optimal time-step</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#adding-a-perturbation">4.2.4. Adding a perturbation</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#defining-the-observables">4.2.5. Defining the observables</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#run-the-propagation">4.2.6. Run the propagation</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_shell_python.html#analyzing-the-results-and-obtaining-the-spectrum">4.2.7. Analyzing the results and obtaining the spectrum</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_cpp.html">5. Tutorial (C++)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cpp.html#nitrogen-molecule">5.1. Nitrogen molecule</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#header">5.1.1. Header</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#electronic-system">5.1.2. Electronic system</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#single-point-energy-calculation">5.1.3. Single point energy calculation</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#potential-energy-surface">5.1.4. Potential energy surface</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#finding-the-minimum-energy-advanced">5.1.5. Finding the minimum energy (advanced)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cpp.html#hydrogen-fluoride-molecule">5.2. Hydrogen fluoride molecule</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#partial-charges">5.2.1. Partial charges</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#hartee-fock">5.2.2. Hartee-Fock</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#parallelization">5.2.3. Parallelization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cpp.html#benzene-optical-absorption-spectrum">5.3. Benzene optical absorption spectrum</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#first-time-propagation-finding-the-optimal-time-step">5.3.1. First time propagation, finding the optimal time-step</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#adding-a-perturbation-and-observables">5.3.2. Adding a perturbation and observables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_cpp.html#electronic-stopping">5.4. Electronic stopping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#aluminum-supercell">5.4.1. Aluminum supercell</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#adding-a-proton">5.4.2. Adding a proton</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#ground-state-calculation">5.4.3. Ground state calculation</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#time-propagation">5.4.4. Time propagation</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial_cpp.html#results">5.4.5. Results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. Developers Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#repository">6.1. Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="#coding">6.2. Coding</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debugging-code">6.3. Debugging code</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference_magnitude.html">inq::magnitude</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference_magnitude.html#inq-magnitude-energy">inq::magnitude::energy</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference_magnitude.html#inq-magnitude-length">inq::magnitude::length</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference_magnitude.html#inq-magnitude-time">inq::magnitude::time</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference_systems.html">inq::systems</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference_systems.html#inq-systems-cell">inq::systems::cell</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference_systems.html#inq-systems-electrons">inq::systems::electrons</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference_systems.html#inq-systems-ions">inq::systems::ions</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">INQ</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">6. </span>Developers Guide</li>
      <li class="wy-breadcrumbs-aside">
          <a href="https://gitlab.com/npneq/inq"><img src="_static/gitlab.png" width="100" alt="gitlab"> </a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="tutorial_cpp.html" class="btn btn-neutral float-left" title="5. Tutorial (C++)" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="reference_magnitude.html" class="btn btn-neutral float-right" title="inq::magnitude" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="developers-guide">
<h1><span class="section-number">6. </span>Developers Guide<a class="headerlink" href="#developers-guide" title="Permalink to this heading"></a></h1>
<section id="repository">
<h2><span class="section-number">6.1. </span>Repository<a class="headerlink" href="#repository" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Inq uses git for development, the main repository is hosted in Gitlab: <a class="reference external" href="https://gitlab.com/npneq/inq/">https://gitlab.com/npneq/inq/</a>. Cloning the repository is achieved via <cite>git clone –recurse-submodules git&#64;gitlab.com:npneq/inq.git</cite>. We are not going enter into details on how to use <cite>git</cite> or GitLab here, only in things that are particular to how inq works. Something important to have in mind is that <cite>git</cite> is not <cite>svn</cite>, trying to use it like that will lead to more pain in the long run.</p></li>
<li><p>It is important that before contributing to inq, you check that your git push mode is set to <cite>current</cite> (or <cite>simple</cite>), and <strong>not</strong> <cite>matching</cite> (it can lead developers to do things they don’t intend to). To set your push mode to <cite>current</cite> use the following command:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>push.default<span class="w"> </span>current
</pre></div>
</div>
<ul class="simple">
<li><p>The branch <cite>master</cite> contains the latest development version of inq. However, you <strong>cannot</strong> directly commit to it. For any changes you need to <strong>create a new branch that later will be merged back into `master`</strong>. The advantage of this is that changes are divided into units of work that can be evaluated before merging.</p></li>
<li><p>The procedure to integrate changes into inq is the following:</p>
<ul>
<li><p>Create and switch to a new branch in your local repository (<cite>git checkout -b name_of_the_new_branch</cite>).</p></li>
<li><p>Make the changes you want to do, test locally if you can, and commit the changes to your new branch (generally <cite>git commit …</cite>).</p></li>
<li><p>Push the changes to the repository (<cite>git push</cite>), <cite>git</cite> will show a special link.</p></li>
<li><p>Create a new “merge request” (MR) in GitLab. (Merge Requests are similar to pull requests (PR) in GitHub.) This is done by opening a link just shown. Give it a meaningful title and a description of what the branch does. If you expect to make more changes to the branch, add “DRAFT:” to the beginning of the title. That tells other developers this is not done yet and shouldn’t be merged right now.</p></li>
<li><p>You can keep <cite>push</cite> ing changes to the branch and they will be considered in the merge request.</p></li>
<li><p>Each time you <cite>push</cite> changes, GitLab will run the continuous integration suite (CI) for inq. The CI compiles inq with different compilers and different architectures and runs some tests. This helps detect any basic problems in your changes. You won’t be able to merge unless all the CI test are completed successfully.</p></li>
<li><p>Once you are satisfied with the changes and the CI is happy, you can merge into the main branch. If you don’t have permission to merge, a maintainer can do it for you.</p></li>
<li><p>It is your responsibility to test the new code, in particular all new code or feature should be accompanied with new tests.</p></li>
</ul>
</li>
<li><p>When doing commits consider the following:</p>
<ul>
<li><p>Several small commits are preferred to a single big one. Small commits make it simple to understand the changes.</p></li>
<li><p>Do not include several unrelated changes in a single commit.</p></li>
<li><p>Write meaningful commit descriptions. Seriously, we read them.</p></li>
<li><p>Do not <cite>push</cite> to GitLab after every single commit. Pushing triggers the CI to run that takes time and computational resources. In some cases a single commit per push might be okay (if you are fixing something in the CI for example), but as a rule of thumb, one push for hour of work is reasonable.</p></li>
<li><p>Conversely, do not keep changes local without pushing them. Other developers should know what your are doing.</p></li>
<li><p>Do as much test locally as your development system permits, this will save time and overloading of the CI system, not to mention the extra coverage it might provide regarding your particular build system. For example you can have the following <cite>./pre-push</cite> script</p></li>
</ul>
</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>mkdir<span class="w"> </span>-p<span class="w"> </span>.build.g++.dbg<span class="w">  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>.build.g++.dbg<span class="w">  </span><span class="o">&amp;&amp;</span><span class="w"> </span>../configure<span class="w"> </span>--prefix<span class="o">=</span><span class="nv">$HOME</span><span class="w">                                                                            </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>-j<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>install<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-j<span class="w"> </span><span class="m">5</span><span class="o">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">666</span>
<span class="o">(</span>mkdir<span class="w"> </span>-p<span class="w"> </span>.build.clang++<span class="w">  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>.build.clang++<span class="w">  </span><span class="o">&amp;&amp;</span><span class="w"> </span>../configure<span class="w"> </span>--prefix<span class="o">=</span><span class="nv">$HOME</span><span class="w">               </span>--disable-debug<span class="w">                                              </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>-j<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>install<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-j<span class="w"> </span><span class="m">5</span><span class="o">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">666</span>
<span class="o">(</span>mkdir<span class="w"> </span>-p<span class="w"> </span>.build.nvcc<span class="w">     </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>.build.nvcc<span class="w">     </span><span class="o">&amp;&amp;</span><span class="w"> </span>../configure<span class="w"> </span>--prefix<span class="o">=</span><span class="nv">$HOME</span><span class="w"> </span>--enable-cuda<span class="w"> </span>--disable-debug<span class="w"> </span>--pass-thru<span class="w"> </span>-DCMAKE_CUDA_HOST_COMPILER<span class="o">=</span>g++-9<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>-j<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>install<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-j<span class="w"> </span><span class="m">5</span><span class="o">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">666</span>
</pre></div>
</div>
<p>Here you can put as many combinations of compilers and flags as you want and as much as it is reasonable to run as a pre validation to <cite>git push</cite>.
Furthermore you can locally link <cite>ln -s ../../pre-push .git/hooks/pre-push</cite> to automatically execute this script before pushing changes.</p>
</section>
<section id="coding">
<h2><span class="section-number">6.2. </span>Coding<a class="headerlink" href="#coding" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Minimize the use of comments, make the code more clear instead of writing and maintaining comments.</p></li>
<li><p>Whitespace (spaces, tabs and line breaks) should be used to help convey the meaning visually as best as possible for most text editors.</p></li>
<li><p>We use [tabs for indentation and spaces for alignment](<a class="reference external" href="https://web.archive.org/web/20070712225742/http://blogs.msdn.com/cyrusn/archive/2004/09/14/229474.aspx">https://web.archive.org/web/20070712225742/http://blogs.msdn.com/cyrusn/archive/2004/09/14/229474.aspx</a>). Most editors allow to adjust the visual length of the tab character (for example 2 or 4), giving some degree of visual options to the developer without affecting the source. We believe that there is no strict one-to-one correspondence between code and whitespace, so be wary of bulk formatting tools or strict rules. At the moment, all inq files should have <cite>/* -*- indent-tabs-mode: t -*- */</cite> in the first line to ensure the editor is using tabs and not whitespaces. Many editors default to whitespaces for indentation.</p></li>
<li><p>To make the code more readable spaces should be used round operators like <cite>=</cite>, <cite>==</cite>, <cite>&lt;</cite>, <cite>&lt;=</cite>, <cite>+=</cite>, <cite>*=</cite>, ‘+’, ‘-’. Also add a space after a <cite>,</cite>.</p></li>
<li><p>Do not add spaces around <cite>*</cite> or <cite>/</cite>, before <cite>(</cite> or <cite>[</cite>, unless to further clarify associativity.</p></li>
<li><p>When possible, declare the variable in the same line it is used. Almost always use <cite>auto</cite> (AAA) unless the explicit type is necessary.</p></li>
<li><p>Do not use single letter variables or type names.</p></li>
<li><p>For objects names: use lowercase and underscore ‘_’ to separate words (<cite>this_is_a_variable</cite>). The only exception is template arguments that should be Capitalized (<cite>ExampleOfATemplatedType</cite>). Ideally template names should convey <em>concepts</em>, either mathematical (e.g. <cite>RealMatrix</cite>) or in the specific domain of the problem (e.g. <cite>Field</cite>).</p></li>
<li><p>Functions and classes should do “one thing” and do it well.</p></li>
<li><p>Use “rule of 10” when possible, (a function/class/namespace with more than 10 lines/members/classes should be decomposed into smaller functions/classes/namespaces). Choose their names carefully given the context.</p></li>
</ul>
</section>
<section id="debugging-code">
<h2><span class="section-number">6.3. </span>Debugging code<a class="headerlink" href="#debugging-code" title="Permalink to this heading"></a></h2>
<p>In order to debug the code you can use gdb. To debug in parallel use the following command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">2</span><span class="w"> </span>gnome-terminal<span class="w"> </span>--wait<span class="w"> </span>--<span class="w"> </span>gdb<span class="w"> </span>-ex<span class="w"> </span>run<span class="w"> </span>--args<span class="w"> </span>./tests/executable
</pre></div>
</div>
<p>You will get two terminal windows one for each process.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tutorial_cpp.html" class="btn btn-neutral float-left" title="5. Tutorial (C++)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="reference_magnitude.html" class="btn btn-neutral float-right" title="inq::magnitude" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2025 Lawrence Livermore National Security, LLC., Xavier Andrade, Alfredo A. Correa.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>